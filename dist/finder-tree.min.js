!function(e){e.module("finderTree.config",[]).value("finderTree.config",{debug:!0}),e.module("finderTree.directives",[]),e.module("finderTree.filters",[]),e.module("finderTree.services",[]),e.module("finderTree",["finderTree.config","finderTree.directives","finderTree.filters","finderTree.services","RecursionHelper","resizable"])}(angular),function(e,t){"use strict";e.module("resizable",[]).directive("resizable",function(){return{restrict:"AE",link:function(e,a,i){a.addClass("resizable");var r,n,l,s=window.getComputedStyle(a[0],null),d=parseInt(s.getPropertyValue("width")),c=parseInt(s.getPropertyValue("height")),u=e.$eval(i.rDirections),f=e.$eval(i.rCenteredX)?2:1,o=e.$eval(i.rCenteredY)?2:1;e.initW===t&&(e.initW=parseInt(s.getPropertyValue("width")));for(var p=function(e){var t="x"===l?r-e.clientX:r-e.clientY;switch(n){case"top":i.rFlex?a[0].style.flexBasis=c+t*o+"px":a[0].style.height=c+t*o+"px";break;case"right":g(d-t*f);break;case"bottom":i.rFlex?a[0].style.flexBasis=c-t*o+"px":a[0].style.height=c-t*o+"px";break;case"left":g(d+t*f)}},g=function(t){t>e.initW&&(i.rFlex?a[0].style.flexBasis=t+"px":a[0].style.width=t+"px")},h=function(e,t){n=t,l="left"===n||"right"===n?"x":"y",r="x"===l?e.clientX:e.clientY,a.addClass("no-transition"),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",p,!1),d=parseInt(s.getPropertyValue("width")),c=parseInt(s.getPropertyValue("height")),a.removeClass("no-transition")}),document.addEventListener("mousemove",p,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1},m=0;m<u.length;m++)!function(){var e=document.createElement("div"),t=u[m];e.setAttribute("class","rg-"+u[m]),e.innerHTML="<span></span>",a[0].appendChild(e),e.ondragstart=function(){return!1},e.addEventListener("mousedown",function(e){h(e,t)},!1)}()}}})}(angular),function(){function e(e,t){return{restrict:"E",require:"?^ngModel",scope:{data:"=",level:"=?"},replace:!0,transclude:!0,template:'<div data-ng-show="data.displayed" class="finder-tree"><ul resizable r-directions="[\'right\']"><li ng-repeat="dir in data.dirs" data-ng-click="displayNext($index)"data-ng-class="{\'ft_selected\': dir.selected}"><i class="ft_folder"></i><span class="ft_span_text">{{dir.name}}</span><i data-ng-class="dir.selected ? \'ft_caret_right_selected\' : \'ft_caret_right\'"></i></li><li ng-repeat="file in data.files" data-ng-click="select(file, $index)"data-ng-class="{\'ft_selected\': file.selected}"><i class="ft_file"></i><span class="ft_span_text_file">{{file.name}}</span></li></ul><finder-tree-wrapped ng-repeat="dir in data.dirs" data="dir" level="level"></finder-tree-wrapped></div>',compile:function(e){return t.compile(e,function(e,t,a,i){e.$watch("level",function(t){0===t&&(e.data.displayed=!0)}),e.level=angular.isDefined(e.level)?e.level+1:0,e.displayNext=function(t){e.resetDisplay(e.data.dirs,t),e.resetFileDisplay(),e.data.dirs[t].displayed=!0,e.data.dirs[t].selected=!0;var a=e.getPath();a.push(e.data.dirs[t].name);var r=e.data.dirs[t].dirs.length+e.data.dirs[t].files.length,n={};n.path=a,n.itemNumber=r,i.$setViewValue(n),i.$render()},e.resetDisplay=function(t,a){void 0!==a&&e.data.dirs[a].selected||angular.forEach(t,function(t){t.selected=!1,t.displayed=!1,e.resetDisplay(t.dirs,a)})},e.resetFileDisplay=function(t){void 0===t&&(t=e.getHighestDirectiveScope().data),angular.forEach(t.dirs,function(t){angular.forEach(t.files,function(e){e.selected=!1}),e.resetFileDisplay(t)}),angular.forEach(t.files,function(e){e.selected=!1})},e.select=function(t,a){e.resetFileDisplay(),e.resetDisplay(e.data.dirs),e.data.files[a].selected=!0;var r=e.getPath();t.path=r;var n=e.data.dirs.length+e.data.files.length;t.itemNumber=n,i.$setViewValue(t),i.$render()},e.getHighestDirectiveScope=function(){var e=this;if(e.$parent.hasOwnProperty("level")){for(;0!==e.$parent.level;)e=e.$parent;return e.$parent}return this},e.getPath=function(){var e=this,t=[];if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("name")&&t.push(e.data.name),e.$parent.hasOwnProperty("level"))for(;0!==e.$parent.level;)e=e.$parent,e.hasOwnProperty("data")&&t.push(e.data.name);return t.reverse()},e.$watch("data",function(t,a){e.resetDisplay(a.dirs),e.data=t,0===e.level&&(e.data.displayed=!0)})})}}}angular.module("finderTree.directives").directive("finderTreeWrapped",e),e.$inject=["$compile","RecursionHelper"]}(),function(){function e(e){return{restrict:"E",require:"?^ngModel",scope:{data:"=",searchFilter:"=?",dataModel:"=ngModel"},transclude:!0,replace:!0,template:'<div style="overflow: auto"><finder-tree-wrapped data="data" ng-model="dataModel" data-ng-hide="searchFilter" data-ng-transclude></finder-tree-wrapped><div class="finder-tree" data-ng-if="searchFilter"><ul resizable r-directions="[\'right\']"><li data-ng-repeat="file in allFiles | filter:filterOnName(searchFilter) track by $index"data-ng-click="selectFile(file)"data-ng-class="{\'ft_selected\': file.selected}"><i class="ft_file"></i><span class="ft_span_text_file">{{file.name}}</span></li><li data-ng-if="filteredFiles.length ===0"><span class="ft_span_text_nomatch">No file found for "{{searchFilter}}"</span></li></ul></div></div>',link:function(t,a,i,r){function n(e,a){angular.isDefined(a)&&a.length>0&&angular.forEach(e,function(e){e.name===a[0]&&(e.displayed=!0,e.selected=!0,a.shift(),0===a.length&&(t.itemNumber=e.dirs.length+e.files.length),n(e.dirs,a))})}function l(e,a){angular.isDefined(a)||(a=[]),angular.forEach(e.files,function(e){e.path=a.slice(),t.allFiles.push(e)}),angular.forEach(e.dirs,function(e){a.push(e.name),l(e,a)})}t.allFiles=[],l(t.data),t.selectFile=function(e,a){t.clearSelectedFiles(),e.selected=!0,e.itemNumber=a,r.$setViewValue(e),r.$render()},t.filterOnName=function(e){var t={};return t.name=e,t},t.$watch("searchFilter",function(a){var i={};if(angular.isDefined(a))if(a.length>0){var n=t.filterOnName(a),l=e("filter")(t.allFiles,n);i.itemNumber=l.length,r.$setViewValue(i),r.$render()}else 0===a.length&&(t.$$childHead.resetDisplay(t.data.dirs),i.itemNumber=t.data.dirs.length+t.data.files.length,r.$setViewValue(i),r.$render())}),t.$watch(function(){return r.$modelValue},function(e,a){if(e.manual&&a.path.length>e.path.length){t.$$childHead.resetDisplay(t.data.dirs),n(t.data.dirs,e.path.slice()),t.$$childHead.resetFileDisplay(t.data);var i={};i.path=e.path,i.itemNumber=t.itemNumber,r.$setViewValue(i),r.$render()}},!0),t.$watch("data",function(e){angular.isDefined(e)&&(t.allFiles=[],l(e))}),t.clearSelectedFiles=function(){angular.forEach(t.allFiles,function(e){e.selected=!1})}}}}angular.module("finderTree.directives").directive("finderTree",e),e.$inject=["$filter"]}(),function(){function e(){return function(e){return e}}angular.module("finderTree.filters").filter("ftFilter",e)}(),angular.module("RecursionHelper",[]).factory("RecursionHelper",["$compile",function(e){return{compile:function(t,a){angular.isFunction(a)&&(a={post:a});var i,r=t.contents().remove();return{pre:a&&a.pre?a.pre:null,post:function(t,n){i||(i=e(r)),i(t,function(e){n.append(e)}),a&&a.post&&a.post.apply(null,arguments)}}}}}]);